<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta HTTP-EQUIV=Cache-Control content=no-cache>
<meta name="author" content="S.V. Danilenko">
<meta http-equiv="refresh" content="360; URL=p03.html">
<title>Основы электроники и цифровой схемотехники</title>
<link href="../img/style02.css" rel="stylesheet" type="text/css">
</head>
<body oncopy="return false" onselectstart="return false">
<a name="ChapTop"></a>
<table width="98%" border="0" background="../img/bgkletka.gif" bgcolor="#FFFFFF">
  <tr>
    <td width="5%" height="58"><div align="center"></div></td>
    <td width="90%">&nbsp; <div align="center"><a href="../cont/ktp-el.html" title="Календарно-тематический план">К Т П</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <a href="p00.html">План занятия</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../img/book.jpg" alt="1" width="59" height="44">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Страницы&nbsp; | <a href="p01.html">1</a> | | 2 | | <a href="p03.html">3</a> | | <a href="p04.html">4</a> | | <a href="p05.html">5</a> | | <a href="p06.html">6</a> | | <a href="p07.html">7</a> | | <a href="p08.html">8</a> | | <a href="p09.html">9</a> |<br/>
    </div>
    <hr width="100%" size="5" noshade></td>
    <td width="5%"><div align="center"><form name="d"> <input type="text" size="4" name="d2"></form></div></td>
  </tr>
  <tr>
    <td height="79"><div align="center"></div></td>
    <td><div align="center">
      <h3>2.15.2.  Разработка клавиатуры</h3>
    </div></td>
    <td><div align="center"></div></td>
  </tr>
  <tr>
    <td height="100%"><div align="center"></div></td>
    <td align="center" valign="top"><p>Различные клавиатуры с большим количеством клавиш (кнопок) широко используются в цифровых системах: в компьютерах,   контроллерах, измерительных приборах, в бытовой технике. Основная задача любой клавиатуры довольно проста: она должна   при любом нажатии на клавишу выдавать код номера этой клавиши и сигнал флага нажатия клавиши (строб этого кода).   Получив этот сигнал флага, внешнее устройство читает код нажатой клавиши и предпринимает требуемые действия.</p>
      <div>&nbsp;<img src="img/lpos-128-p.png" width="600" height="375" alt="Keybord_128key"><br>Рис.39.0. Защищенная программируемая клавиатура POSUA LPOS-128P-M00, 128 клавиш.</div>
      <p>Главная задача при проектировании клавиатуры состоит в минимизации аппаратных затрат и в обеспечении надежного   срабатывания в любой ситуации. Существует масса схемотехнических решений этой задачи — от примитивных до сложнейших.   Клавиатуры могут быть механическими, квазисенсорными или сенсорными, клавиатуры могут иметь жесткую логику работы или   быть интеллектуальными, даже допускать перепрограммирование. Мы будем в качестве примера рассматривать самую простую   механическую клавиатуру с жесткой логикой работы.</p>
      <p>Количество клавиш полноразмерной клавиатуры компьютера превышает сотню, поэтому мы будем проектировать клавиатуру   на максимальное количество клавиш, равное 128. Естественно, клавиатура  должна иметь защиту от дребезга механических   контактов и должна корректно обрабатывать ситуацию одновременного нажатия нескольких клавиш. Примем, например, что   при одновременном нажатии нескольких клавиш клавиатура  должна выдавать код только одной из них. Примем также, что   максимально возможный темп нажатия  клавиш на клавиатуре не должен превышать 20 нажатий в секунду (это довольно много).   Таким образом, основные требования к проектируемому устройству сформулированы. Начнем разработку.</p>
      
      <p>Очень часто удобным и эффективным приемом является начало разработки устройства "с конца". То есть проектирование   начинается исходя из требуемого результата, из тех сигналов, которые устройство должно выдавать вовне и принимать   извне. И только в конце проектирования разрабатывается та часть устройства, которая выполняет требуемую функцию.   Такой подход гарантирует, что разработанное устройство не будет чрезмерно избыточным, не будет делать ничего   лишнего, а также то, что оно корректно будет взаимодействовать с другими устройствами и системами. Этот   принцип проектирования не универсален, порой выдержать его в течение всего процесса разработки трудно,   но попробовать его применить к любому устройству никогда не помешает.</p>
      <p>В нашем случае необходимо сначала определиться, что должна выдавать на выходе клавиатура. Обычно это   задается техническим заданием, но мы примем, что наша клавиатура  должна выдавать 7-разрядный двоичный номер   нажатой клавиши (так как 2<sup>7</sup> = 128) и сопровождать его положительным сигналом флага нажатия. Сигнал флага и   код клавиши должны сохраняться до тех пор, пока нажата клавиша. За это время (несколько миллисекунд) внешнее   устройство должно успеть проанализировать сигнал флага и прочитать выходной код клавиатуры. Обычно данное   требование не слишком жесткое.</p>
      <p>Альтернативное решение — сохранение кода нажатой клавиши и сигнала флага до момента чтения выходного   кода внешним устройством — конечно же, снижает требование к быстродействию читающего внешнего устройства,   однако оно может привести к тому, что некоторые нажатия клавиш останутся без реакции, не будут обработаны.</p>
      <p>Также необходимо определиться, как клавиатура  будет вести себя при одновременном нажатии нескольких клавиш.   Наиболее сложные, интеллектуальные клавиатуры выдают последовательно коды всех нажатых клавиш, запоминая их в   буферной памяти. Но мы примем, что клавиатура  должна выдавать только код одной из одновременно нажатых клавиш   (первой по установленному порядку). Нажатия всех остальных клавиш одновременно с данной просто игнорируются.</p>
      <p>При проектировании механической клавиатуры важно решить, как будет обрабатываться неизбежно присутствующий   дребезг механических контактов клавиш. Его можно обрабатывать как внутри клавиатуры, так и вне ее (то есть перенести   эту функцию на внешнее устройство). Оба эти подхода имеют свои преимущества. Но наша клавиатура  будет обрабатывать   дребезг контактов самостоятельно. Принцип обработки выбираем очень простой: первое зафиксированное замыкание   контактов клавиши считается началом нажатия, а конец нажатия определяется тогда, когда контакты будут разомкнуты   в течение заданного интервала времени.</p>
      <p>В результате временная диаграмма работы разрабатываемой клавиатуры может быть упрощенно представлена в виде рис. 39.1. Здесь сигнал флага начинается при фиксации единичного сигнала с клавиши (это может быть как во время   дребезга, так и после его окончания). После выставления флага фиксируется выходной код клавиши. После отпускания   клавиши (нулевой сигнал), через время задержки t<sub>зад</sub> снимается сигнал флага. Время задержки должно быть заведомо   больше времени дребезга контактов. Выходной код может сохраняться после отпускания клавиши до следующего нажатия,   а может и сниматься.</p>      <p>&nbsp;</p>    </td>
    <td><div align="center"></div></td>
  </tr>
  <tr>
    <td height="100%"><div align="center"></div></td>
    <td align="center" valign="top"><img src="img/39-1.gif" width="493" height="134" alt="11"><br>Рис.39.1. Временная диаграмма работы клавиатуры.</td>
    <td><div align="center"></div></td>
  </tr>
  <tr>
    <td height="100%"><div align="center"></div></td>
    <td align="left" valign="top"><p>&nbsp;</p>
    <p>Дальнейшая разработка невозможна без выбора принципа преобразования сигналов от нажатия клавиш в код номера нажатой клавиши.</p></td>
    <td><div align="center"></div></td>
  </tr>
  <tr>
    <td><div align="center"></div></td>
    <td><div align="center">
      <hr width="100%" size="4" noshade>
      <a href='javascript:history.go(-1)'><img src="../img/nazad.jpg" alt="Предыдущая" width="31" height="20"></a>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; <a href="p02.html#ChapTop"><img src="../img/vverh.gif" alt="В начало страницы" width="20" height="31"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="p03.html"><img src="../img/vpr.jpg" alt="Следующая" width="31" height="20"></a>
      
    </div></td>
    <td><div align="center">2</div></td>
  </tr>
</table>
</body>

<script>
var milisec=0
var seconds=0
document.d.d2.value='0'
function display(){
if (milisec>=9){
milisec=0
seconds+=1
}
else
milisec+=1
document.d.d2.value=seconds+"."+milisec
setTimeout("display()",100)
}
display()
</script>

</html>
