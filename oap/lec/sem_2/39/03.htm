<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>ОП | Лекция № 39</title>
<link rel=stylesheet type=text/css href=../../../css/lec.css>
</head>
<body>
<a name=#start></a>
<table class=pages align=center border=0 cellpadding=0 cellspacing=0>
<tr colspan=5>
<td>&nbsp&nbsp<a href="../../../plan_2.htm" class=p>Календарно-тематический план</a>&nbsp&nbsp</td>
<td><a href="index.htm" class=p>&nbsp План лекции &nbsp</a></td>
<td><a href="01.htm" class=p>&nbsp 1 &nbsp</a></td>
<td><a href="02.htm" class=p>&nbsp 2 &nbsp</a></td>
<td><a href="03.htm" class=a>&nbsp 3 &nbsp</a></td>
<td><a href="04.htm" class=p>&nbsp 4 &nbsp</a></td>
<td><a href="05.htm" class=p>&nbsp 5 &nbsp</a></td>
<td><a href="06.htm" class=p>&nbsp 6 &nbsp</a></td>
</tr>
</table>
<!-- -------Inside table------- -->
<table width=98% border=0 cellpadding=5 cellspacing=0>
<tr>
<td class=usual>
<p align=center class=dbi><br>Обращение к элементу объединения</p>
<p>Для обращения к элементу объединения можно использовать
<ul>
<li>либо уточненное имя: 
<pre>			имя_объединения<b>.</b>имя_элемента</pre>
<li>либо конструкцию, включающую указатель:
<pre>			указатель_на_объединение -> имя_элемента

			(*указатель_на_объединение).имя_элемента
</pre>
<p><li>либо конструкцию, включающую ссылку:
<pre>			ссылка_на_объединение.имя элемента</pre>
</ul>
<p>Например:
<pre>
			ma.d = 65.9;
			mb[2]<b>.</b>f[1] = 12L;
			pt = &mb[0];
			pt -> f[0] = 67;
			cin >> (*pt)<b>.</b>k[1];
			cin >> rmix<b>.</b>f[0];
</pre>
<p>Основное достоинство объединения - возможность разных трактовок одного и того же содержимого (кода) участка памяти.
<br>Например, введя объединение
<pre>
			union
			{
				float f;
				unsigned long k;
				char h[4];
			} FKH;
</pre>
<p>можно занести в участок памяти, выделенный для объединения <i>FKH</i>, вещественное число
<pre>
			FKH.f = 3.141593;
</pre>
<p>а затем рассматривать код его внутреннего представления как некоторое беззнаковое длинное целое:
<pre>
			cout << FKH.k;
</pre>
<p>В данном случае будет выведено значение 1078530012.
<p>Можно получить значения кодов, находящихся в отдельных байтах:
<pre>
			for(int i = 0; i < 4; i++)
				cout << FKH.h[i];
</pre>
<p>Следующая программа позволяет проверить возможность получения значений полей объединения.
<pre>
	#include&lt;conio.h&gt;
	#include&lt;math.h&gt;
	#include&lt;iostream.h&gt;
	void main(void)
	{
		union
		{
			double f;
			unsigned long k;
			unsigned char h[8];
		} FKH;
		clrscr();
		int x = sizeof(FKH);
		cout << x << " байт" << endl;
		FKH.f = M_PI;
		cout << "double f = " << FKH.f << endl;
		cout << "unsigned long k = " << FKH.k << endl;
		cout << "unsigned char h[8]:" << endl;
		for(int i = 0; i < x; i++)
			cout << i << " - " << FKH.h[i] << '\t' << int(FKH.h[i]) << endl;
		getch();
	}
</pre>
<p>Проанализируйте содержимое каждого байта памяти. Воспользуйтесь Таблицей ASCII кодов символов.
<p><center><img border=0 src="l41_ascii.gif" alt="Таблица ASCII кодов символов"></center>


<p>&nbsp;</p>
</td></tr>
</table>
<!-- -------End of Inside table------- -->
<table class=pages align=center border=0 cellpadding=0 cellspacing=0>
<tr colspan=5>
<td>&nbsp&nbsp<a href="../../../plan_2.htm" class=p>Календарно-тематический план</a>&nbsp&nbsp</td>
<td><a href="index.htm" class=p>&nbsp План лекции &nbsp</a></td>
<td><a href="01.htm" class=p>&nbsp 1 &nbsp</a></td>
<td><a href="02.htm" class=p>&nbsp 2 &nbsp</a></td>
<td><a href="03.htm" class=a>&nbsp 3 &nbsp</a></td>
<td><a href="04.htm" class=p>&nbsp 4 &nbsp</a></td>
<td><a href="05.htm" class=p>&nbsp 5 &nbsp</a></td>
<td><a href="06.htm" class=p>&nbsp 6 &nbsp</a></td>
</tr>
</table>
<a name=#end></a>
</body>
</html>