<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>ОП | Лекция № 32</title>
<link rel=stylesheet type=text/css href=../../../css/lec.css>
</head>
<body>
<a name=#start></a>
<table class=pages align=center border=0 cellpadding=0 cellspacing=0>
<tr colspan=5>
<td>&nbsp&nbsp<a href="../../../plan_2.htm" class=p>Календарно-тематический план</a>&nbsp&nbsp</td>
<td><a href="index.htm" class=p>&nbsp План лекции &nbsp</a></td>
<td><a href="01.htm" class=p>&nbsp 1 &nbsp</a></td>
<td><a href="02.htm" class=p>&nbsp 2 &nbsp</a></td>
<td><a href="03.htm" class=a>&nbsp 3 &nbsp</a></td>
<td><a href="04.htm" class=p>&nbsp 4 &nbsp</a></td>
<td><a href="05.htm" class=p>&nbsp 5 &nbsp</a></td>
<td><a href="06.htm" class=p>&nbsp 6 &nbsp</a></td>
<td><a href="07.htm" class=p>&nbsp 7 &nbsp</a></td>
</tr>
</table>
<!-- -------Inside table------- -->
<table width=98% border=0 cellpadding=5 cellspacing=0>
<tr><td class=usual>
<p align=center class=dbi><br>Доступ к строковой константе</p>
Доступ к строковой константе осуществляется через указатель на ее первый элемент. 
<p>Если описать строку как массив типа char, то память для этой строки резервируется 
автоматически. 
<pre>
	/*  массив для размещения 7 литер и '\0'. Отдельные литеры внутри массива 
	    могут изменяться, но ames всегда ссылается на одно и то же место памяти
	*/
	char ames[] = "Borland";
</pre>
Если описать строку как указатель на тип данных char, то память не резервируется: 
необходимо либо выделить ее, используя функцию malloc или ей подобную, или 
присвоить ей адрес существующей строки.
<pre>
	/* указатель, инициализированный ссылкой на стринговую константу. Значение 
	   указателя можно изменить, и тогда он будет ссылаться на что-либо другое. 
	   Кроме того, результат будет неопределен, если попытаться изменить 
	   содержимое константы
	*/
	char *pmes = "Borland";
</pre>
<p>Рассмотрим работу с двумерным строковым массивом, содержащим N строк M столбцов.
<br>Определим количество слов в тексте nw, общее количество символов nc, количество символа ы.
<pre>
	#include&lt;string.h>
	#include&lt;conio.h>
	#include&lt;iostream.h>
	#define	IN	1	// внутри слова
	#define	OUT	0	// вне слова
	#define	N	4	// строк
	#define	M	40	// символов в строке
	void main()
	{
		char ch = 'ы',	str[N][M] = { "Русь былую, удалую", "Ты потомству передашь;",
					"Ты схватил ее живую", "Под народный карандаш." };
		int i, j, k = 0, num[N] = {0}, nl = 0, nw = 0, nc = 0, state; clrscr();
		for(i = 0; i < N; i++)
		{	state = OUT;
			num[i] = strlen(str[i]);	// символов в i строке
			gotoxy(4, 1 + i); cout << str[i] << "  " << num[i];
			for(j = 0; j < num[i]; j++)
			{	++nc;
				if(str[i][j] == ch) 
					{ gotoxy(40 + ++nl, 1 + i); cout << ch; }
				if(str[i][j] == ' ' || str[i][j] == '\n' || str[i][j] == '\t') 
					state = OUT;
				else if(state == OUT)
					{ state = IN; ++nw; }
			}
		}
		cout << "\n\nСтрок " << i << " слов " << nw << " всего символов " << nc 
			<< " символов " << ch << " - " << nl << endl;
		getch();
	}
</pre>
Для подсчета количества определенных символов в тексте можно поступить, как показано в следующем примере.
<br>Используя оператор множественного выбора switch ... case ... default ... break, 
подсчитать, сколько раз каждый символ встретился в фразе "Веет ветер".
<pre>
	#include&lt;conio.h>
	#include&lt;stdlib.h>
	#include&lt;stdio.h>
	#include&lt;iostream.h>
	#include&lt;iomanip.h>
	void main()
	{	char ch, *str; int i, p; 
		int mas[10] = {0}; clrscr();
	        	cout << "Вводи строку:  ";
		while( (ch = getchar()) != '\n')
		{	switch(ch)
			{	case 'В': p = 0; break;
				case 'в': p = 1; break;
				case ' ': p = 2; break;
				case 'е': p = 3; break;
				case 'т': p = 4; break;
				case 'р': p = 5; break;
			} ++mas[p]; str[p] = ch;
		}	for(i = 0; i <= 5; i++)
				cout << setw(1) << str[i] << setw(4) << mas[i] << endl;
		getch();
	}


		<b><i>Результаты:</i></b>	Веет ветер
				В	1
				в	1
				 	1
				е	4
				т	2
				р	1
</pre>
<p> &nbsp;
</td></tr>
</table>
<!-- -------End of Inside table------- -->
<table class=pages align=center border=0 cellpadding=0 cellspacing=0>
<tr colspan=5>
<td>&nbsp&nbsp<a href="../../../plan_2.htm" class=p>Календарно-тематический план</a>&nbsp&nbsp</td>
<td><a href="index.htm" class=p>&nbsp План лекции &nbsp</a></td>
<td><a href="01.htm" class=p>&nbsp 1 &nbsp</a></td>
<td><a href="02.htm" class=p>&nbsp 2 &nbsp</a></td>
<td><a href="03.htm" class=a>&nbsp 3 &nbsp</a></td>
<td><a href="04.htm" class=p>&nbsp 4 &nbsp</a></td>
<td><a href="05.htm" class=p>&nbsp 5 &nbsp</a></td>
<td><a href="06.htm" class=p>&nbsp 6 &nbsp</a></td>
<td><a href="07.htm" class=p>&nbsp 7 &nbsp</a></td>
</tr>
</table>
<a name=#end></a>
</body>
</html>